!function(t){"use strict";function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(t){return t instanceof Function}function a(t){return!e(t)&&t instanceof Object}function r(t,e){var i;for(i in e)a(e[i])||n(e[i])?(a(e[i])&&!a(t[i])&&(t[i]={}),n(e[i])&&!n(t[i])&&(t[i]=[]),r(t[i],e[i])):void 0!==e[i]&&(t[i]=e[i])}function i(t,n){var e={};return r(e,t),r(e,n),e}function o(t){var n,e,a,r,i,o,c,s,d,u,l;return u=Object.prototype.toString.call(t),"[object Date]"===u?t:"[object String]"===u&&(a=t.match(j))?(l=parseInt(a[1],10),o=parseInt(a[3],10)-1,n=parseInt(a[5],10),e=parseInt(a[7],10),i=a[9]?parseInt(a[9],10):0,d=a[11]?parseInt(a[11],10):0,r=a[12]?1e3*parseFloat(D+a[12].slice(1)):0,s=Date.UTC(l,o,n,e,i,d,r),a[13]&&a[14]&&(c=60*a[15],a[17]&&(c+=parseInt(a[17],10)),c*="-"===a[14]?-1:1,s-=60*c*1e3),new Date(s)):void 0}function c(t){var n,e,a;for(n=0;n<t.length;n++)for(a=t[n].data,e=0;e<a.length;e++)if(a[e][1]<0)return!0;return!1}function s(t,n,e,a,r){return function(o,s,d){var u=i({},t);return u=i(u,d||{}),s.hideLegend&&n(u),"min"in s?e(u,s.min):c(o)||e(u,0),"max"in s&&a(u,s.max),s.stacked&&r(u),s.colors&&(u.colors=s.colors),u=i(u,s.library||{})}}function d(t,n){document.body.innerText?t.innerText=n:t.textContent=n}function u(t,n){d(t,"Error Loading Chart: "+n),t.style.color="#ff0000"}function l(t,n,e){P.ajax({dataType:"json",url:n,success:e,error:function(n,e,a){var r="string"==typeof a?a:a.message;u(t,r)}})}function f(t,n){try{n(t)}catch(e){throw u(t.element,e.message),e}}function h(t,n){"string"==typeof t.dataSource?l(t.element,t.dataSource,function(e){t.data=e,f(t,n)}):(t.data=t.dataSource,f(t,n))}function p(t){return""+t}function m(t){return parseFloat(t)}function v(t){if("object"!=typeof t)if("number"==typeof t)t=new Date(1e3*t);else{var n=t.replace(/ /,"T").replace(" ","").replace("UTC","Z");t=o(n)||new Date(t)}return t}function g(t){if(!n(t)){var e,a=[];for(e in t)t.hasOwnProperty(e)&&a.push([e,t[e]]);t=a}return t}function C(t,n){return t[0].getTime()-n[0].getTime()}function w(t,n){var a,r,i;for(i="render"+t+"Chart",a=0;a<I.length;a++)if(r=I[a],e(r[i]))return r[i](n);throw new Error("No adapter found")}function y(t,e,a){var r,i,o,c,s;for(!n(t)||"object"!=typeof t[0]||n(t[0])?(t=[{name:"Value",data:t}],e.hideLegend=!0):e.hideLegend=!1,e.discrete&&(a=!1),r=0;r<t.length;r++){for(o=g(t[r].data),c=[],i=0;i<o.length;i++)s=o[i][0],s=a?v(s):p(s),c.push([s,m(o[i][1])]);a&&c.sort(C),t[r].data=c}return t}function x(t){var n,e=g(t);for(n=0;n<e.length;n++)e[n]=[p(e[n][0]),m(e[n][1])];return e}function b(t){t.data=y(t.data,t.options,!0),w("Line",t)}function A(t){t.data=y(t.data,t.options,!1),w("Column",t)}function S(t){t.data=x(t.data),w("Pie",t)}function z(t){t.data=y(t.data,t.options,!1),w("Bar",t)}function T(t){t.data=y(t.data,t.options,!0),w("Area",t)}function L(t){t.data=x(t.data),w("Geo",t)}function k(t,n,e,a,r){"string"==typeof n&&(n=document.getElementById(n)),t.element=n,t.options=a||{},t.dataSource=e,O.charts[n.id]=t,h(t,r)}var O,j,D,I=[],P=t.jQuery||t.Zepto||t.$;if(j=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,D=String(1.5).charAt(1),"Highcharts"in t){var E=new function(){var n=t.Highcharts,e={chart:{},xAxis:{labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},series:{marker:{}}}},a=function(t){t.legend.enabled=!1},r=function(t,n){t.yAxis.min=n},o=function(t,n){t.yAxis.max=n},c=function(t){t.plotOptions.series.stacking="normal"},d=s(e,a,r,o,c);this.renderLineChart=function(t,e){e=e||"spline";var a={};"areaspline"===e&&(a={plotOptions:{areaspline:{stacking:"normal"},series:{marker:{enabled:!1}}}});var r,i,o,c=d(t.data,t.options,a);c.xAxis.type=t.options.discrete?"category":"datetime",c.chart.type=e,c.chart.renderTo=t.element.id;var s=t.data;for(i=0;i<s.length;i++){if(r=s[i].data,!t.options.discrete)for(o=0;o<r.length;o++)r[o][0]=r[o][0].getTime();s[i].marker={symbol:"circle"}}c.series=s,new n.Chart(c)},this.renderPieChart=function(t){var a={};t.options.colors&&(a.colors=t.options.colors);var r=i(i(e,a),t.options.library||{});r.chart.renderTo=t.element.id,r.series=[{type:"pie",name:"Value",data:t.data}],new n.Chart(r)},this.renderColumnChart=function(t,e){var a,r,i,o,e=e||"column",c=t.data,s=d(c,t.options),u=[];for(s.chart.type=e,s.chart.renderTo=t.element.id,a=0;a<c.length;a++)for(i=c[a],r=0;r<i.data.length;r++)o=i.data[r],u[o[0]]||(u[o[0]]=new Array(c.length)),u[o[0]][a]=o[1];var l=[];for(a in u)u.hasOwnProperty(a)&&l.push(a);s.xAxis.categories=l;var f=[];for(a=0;a<c.length;a++){for(o=[],r=0;r<l.length;r++)o.push(u[l[r]][a]||0);f.push({name:c[a].name,data:o})}s.series=f,new n.Chart(s)};var u=this;this.renderBarChart=function(t){u.renderColumnChart(t,"bar")},this.renderAreaChart=function(t){u.renderLineChart(t,"areaspline")}};I.push(E)}if("google"in t){var W=new function(){var n=t.google,e=!1;n.setOnLoadCallback(function(){e=!0}),n.load("visualization","1.0",{packages:["corechart"]});var a=function(t){n.setOnLoadCallback(t),e&&t()},r={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},o=function(t){t.legend.position="none"},c=function(t,n){t.vAxis.viewWindow.min=n},d=function(t,n){t.vAxis.viewWindow.max=n},u=function(t,n){t.hAxis.viewWindow.min=n},l=function(t,n){t.hAxis.viewWindow.max=n},f=function(t){t.isStacked=!0},h=s(r,o,c,d,f),p=function(t,e){var a=new n.visualization.DataTable;a.addColumn(e,"");var r,i,o,c,s,d=[];for(r=0;r<t.length;r++)for(o=t[r],a.addColumn("number",o.name),i=0;i<o.data.length;i++)c=o.data[i],s="datetime"===e?c[0].getTime():c[0],d[s]||(d[s]=new Array(t.length)),d[s][r]=m(c[1]);var u=[];for(r in d)d.hasOwnProperty(r)&&u.push(["datetime"===e?new Date(m(r)):r].concat(d[r]));return"datetime"===e&&u.sort(C),a.addRows(u),a},v=function(n){t.attachEvent?t.attachEvent("onresize",n):t.addEventListener&&t.addEventListener("resize",n,!0),n()};this.renderLineChart=function(t){a(function(){var e=h(t.data,t.options),a=p(t.data,t.options.discrete?"string":"datetime");t.chart=new n.visualization.LineChart(t.element),v(function(){t.chart.draw(a,e)})})},this.renderPieChart=function(t){a(function(){var e={chartArea:{top:"10%",height:"80%"}};t.options.colors&&(e.colors=t.options.colors);var a=i(i(r,e),t.options.library||{}),o=new n.visualization.DataTable;o.addColumn("string",""),o.addColumn("number","Value"),o.addRows(t.data),t.chart=new n.visualization.PieChart(t.element),v(function(){t.chart.draw(o,a)})})},this.renderColumnChart=function(t){a(function(){var e=h(t.data,t.options),a=p(t.data,"string");t.chart=new n.visualization.ColumnChart(t.element),v(function(){t.chart.draw(a,e)})})},this.renderBarChart=function(t){a(function(){var e={hAxis:{gridlines:{color:"#ccc"}}},a=s(r,o,u,l,f)(t.data,t.options,e),i=p(t.data,"string");t.chart=new n.visualization.BarChart(t.element),v(function(){t.chart.draw(i,a)})})},this.renderAreaChart=function(t){a(function(){var e={isStacked:!0,pointSize:0,areaOpacity:.5},a=h(t.data,t.options,e),r=p(t.data,t.options.discrete?"string":"datetime");t.chart=new n.visualization.AreaChart(t.element),v(function(){t.chart.draw(r,a)})})},this.renderGeoChart=function(t){a(function(){var e={legend:"none",colorAxis:{colors:t.options.colors||["#f6c7b6","#ce502d"]}},a=i(i(r,e),t.options.library||{}),o=new n.visualization.DataTable;o.addColumn("string",""),o.addColumn("number","Value"),o.addRows(t.data),t.chart=new n.visualization.GeoChart(t.element),v(function(){t.chart.draw(o,a)})})}};I.push(W)}O={LineChart:function(t,n,e){k(this,t,n,e,b)},PieChart:function(t,n,e){k(this,t,n,e,S)},ColumnChart:function(t,n,e){k(this,t,n,e,A)},BarChart:function(t,n,e){k(this,t,n,e,z)},AreaChart:function(t,n,e){k(this,t,n,e,T)},GeoChart:function(t,n,e){k(this,t,n,e,L)},charts:{}},t.Chartkick=O}(window);